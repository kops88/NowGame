### 人生卷轴 · 主界面数据模型（Dart）

```dart
/// 核心约定：
/// - 所有进度均为 [0.0, 1.0] 区间的小数，表示百分比。
/// - 金额统一使用最小货币单位（如分、厘）以避免小数误差。
/// - 时间统一使用 DateTime（UTC 或本地由上层统一规范）。

/// 顶层聚合模型：主界面六大模块的数据快照
class DashboardModel {
  /// 时间模块（五层嵌套进度环）
  final TimeModule time;

  /// 健康模块（健康分与情绪分折线用的序列与统计）
  final HealthCardData health;

  /// 智慧模块（技能与经验值）
  final WisdomModule wisdom;

  /// 金钱模块（薪资/余额等摘要）
  final MoneySummary money;

  /// 影响力模块（锁定状态与门槛）
  final InfluenceStatus influence;

  /// 主线任务模块（任务列表与统计）
  final MainQuestModule mainQuest;

  DashboardModel({
    required this.time,
    required this.health,
    required this.wisdom,
    required this.money,
    required this.influence,
    required this.mainQuest,
  });
}

// -----------------------------
// 通用值对象
// -----------------------------

/// 本地时间（不含日期），用于每日重置等配置
class LocalTime {
  /// 小时，取值 [0, 23]
  final int hour;

  /// 分钟，取值 [0, 59]
  final int minute;

  const LocalTime({required this.hour, required this.minute});
}

/// 通用数值时间点，用于折线图/趋势图
class MetricPoint {
  /// 时间戳（建议以日为粒度用于健康/情绪，或更高频用于专注时长）
  final DateTime time;

  /// 数值（如健康分、情绪分、分钟数等）
  final double value;

  const MetricPoint({required this.time, required this.value});
}

/// 金额值对象（使用最小货币单位，避免浮点误差）
class Money {
  /// ISO 货币代码（如 "CNY"、"USD"）
  final String currencyCode;

  /// 金额最小单位（如分）：例如 12345 表示 ¥123.45
  final int amountMinorUnits;

  const Money({required this.currencyCode, required this.amountMinorUnits});
}

// -----------------------------
// 时间 Time（五层嵌套进度环）
// -----------------------------

/// 时间配置：用于计算生命周期与每日重置
class TimeConfig {
  /// 出生日期（用于计算人生进度）
  final DateTime birthDate;

  /// 预期寿命（单位：年），用于人生环的总长度
  /// @Modify 希望 预期寿命 可以因为健康因素而被修改, 不是用final
  /// @Modify 希望添加一个接口: 将预期寿命的天数转到预期寿命年数
  int expectedLifespanYears;

  /// @Modify 每日重置时间
  final LocalTime dayResetTime;

  const TimeConfig({
    required this.birthDate,
    required this.expectedLifespanYears,
    required this.dayResetTime,
  });
}

/// 时间进度快照（对应五层环）
class TimeProgressSnapshot {
  /// 当前时间（生成快照的时间点）
  final DateTime now;

  /// 人生进度（最外层）
  /// @Modify 使用当前离出生日期的天数 / 预期寿命天数
  final double lifeProgress;

  /// 年进度
  /// @Modify 使用当前离1月1日的天数 / 今年天数
  final double yearProgress;

  /// 月进度
  /// @Modify 使用当前日期 / 本月天数
  final double monthProgress;

  /// 周进度（以周一为起点或由上层约定）
  /// @Modify 当前星期数 / 7

  final double weekProgress;

  /// 日进度（受 dayResetTime 影响）
  final double dayProgress;

  const TimeProgressSnapshot({
    required this.now,
    required this.lifeProgress,
    required this.yearProgress,
    required this.monthProgress,
    required this.weekProgress,
    required this.dayProgress,
  });
}

/// 时间模块聚合
class TimeModule {
  /// 配置（相对稳定）
  final TimeConfig config;

  /// 动态进度快照（用于绘制 5 环）
  final TimeProgressSnapshot snapshot;

  const TimeModule({required this.config, required this.snapshot});
}

// -----------------------------
// 健康 Health（健康折线 + 统计；情绪可复用）
// -----------------------------

/// 健康卡片数据
class HealthCardData {
  /// 健康分时序（建议每日 1 点），范围建议 [0, 100]
  final List<MetricPoint> healthScores;

  /// 健康分统计：平均值
  final double averageScore;

  /// 健康分统计：最高值
  final double maxScore;

  /// 健康分统计：最低值
  final double minScore;

  const HealthCardData({
    required this.healthScores,
    this.moodScores,
    required this.averageScore,
    required this.maxScore,
    required this.minScore,
  });
}

/// @modify 添加情绪卡片, 与健康卡片分离
class MoodCardData {
  /// 情绪/幸福度时序（可选），范围建议 [0, 100]
  final List<MetricPoint>? moodScores;

  /// 健康分统计：平均值
  final double averageScore;

  /// 健康分统计：最高值
  final double maxScore;

  /// 健康分统计：最低值
  final double minScore;

  const HealthCardData({
    required this.healthScores,
    this.moodScores,
    required this.averageScore,
    required this.maxScore,
    required this.minScore,
  });
}

// -----------------------------
// 智慧 Wisdom（技能与经验值）
// -----------------------------

/// 单个技能的数据模型
class WisdomSkill {
  /// 技能唯一标识（如 "english_speaking"）
  final String id;

  /// 技能名称（如 “英语口语”）
  final String name;

  /// 当前技能等级（Lv.）
  final int level;

  /// 距离下一级所需经验的当前值（如 80）
  final int currentXp;

  /// 升级所需的总经验（如 100），用于计算百分比 currentXp / nextLevelXp
  final int nextLevelXp;

  /// 技能历史累计总经验（用于展示或成就）
  final int totalXp;

  /// 最近一次变更时间（打卡/增长发生时更新）
  final DateTime updatedAt;

  const WisdomSkill({
    required this.id,
    required this.name,
    required this.level,
    required this.currentXp,
    required this.nextLevelXp,
    required this.totalXp,
    required this.updatedAt,
  });
}

/// 智慧模块聚合（折叠/展开逻辑由 UI 控制）
class WisdomModule {
  /// 当前修炼中的技能集合
  final List<WisdomSkill> activeSkills;

  const WisdomModule({required this.activeSkills});
}

// -----------------------------
// 金钱 Wealth（金钱摘要小卡片）
// -----------------------------

/// 金钱摘要
class MoneySummary {
  /// 月薪（卡片主文案用）
  final Money monthlySalary;

  /// 当前余额（可选，预留拓展）
  /// @modify 暂时无用
  final Money? currentBalance;

  const MoneySummary({
    required this.monthlySalary,
    this.currentBalance,
  });
}

// -----------------------------
// 影响力 Influence（锁定状态/等级门槛）
// -----------------------------

/// 影响力状态
/// @modify 暂时无用, 显示未解锁
class InfluenceStatus {
  /// 是否锁定（为 true 时卡片显示灰态/“Lv.X 解锁”）
  final bool locked;

  /// 当前等级（如 7）
  final int currentLevel;

  /// 解锁所需等级（如 10）
  /// @modify 解锁所需等级改为99
  final int requiredLevelToUnlock;

  /// 锁定原因或提示（可选，如“完成 3 个主线 Lv.10 解锁”）
  final String? lockReason;

  const InfluenceStatus({
    required this.locked,
    required this.currentLevel,
    required this.requiredLevelToUnlock,
    this.lockReason,
  });
}

// -----------------------------
// 主线任务 Main Quest（进度条/倒计时/趋势与热力图）
// -----------------------------

/// 子任务（可勾选）
class SubQuest {
  /// 子任务唯一标识
  final String id;

  /// 描述文案
  final String title;

  /// 是否完成
  final bool done;

  /// @modify 是否为限时任务
  final bool IsLimited;

  /// @modify 截止日期
  /// @modify 需要添加接口: 现在到截止日期的天数
  /// @modify 需要添加接口: 用户输入限时天数, 自动计算当前 + 天数后的日期
  final DateTime FinalDate;

  const SubQuest({required this.id, required this.title, required this.done});
}

/// 任务完成记录（用于经验掉落日志）
class QuestLogEntry {
  /// 发生时间
  final DateTime time;

  /// 获得的智慧经验（如 +10）
  final int wisdomXp;

  /// 获得的健康值（如 +5）
  final int healthScore;

  /// 备注（可选）
  final String? note;

  const QuestLogEntry({
    required this.time,
    required this.wisdomXp,
    required this.healthScore,
    this.note,
  });
}

/// 专注时长会话（用于统计曲线与热力图）
class FocusSession {
  /// 会话开始时间
  final DateTime start;

  /// 持续时长（分钟）
  final int minutes;

  const FocusSession({required this.start, required this.minutes});
}

/// 热力图单元（按天聚合的强度值）
class HeatmapCell {
  /// 日期（仅日期维度，时间部分建议置零）
  final DateTime date;

  /// 强度值（可取累计分钟或归一化等级）
  final int intensity;

  const HeatmapCell({required this.date, required this.intensity});
}

/// 任务统计（便于详情页直接渲染）
class QuestStats {
  /// 专注时长折线图数据（如按日聚合的分钟数）
  final List<MetricPoint> focusTrend;

  /// 打卡热力图（按天的强度）
  final List<HeatmapCell> contributions;

  const QuestStats({
    required this.focusTrend,
    required this.contributions,
  });
}

/// 主线任务实体
class Quest {
  /// 任务唯一标识
  final String id;

  /// 任务名称（如 “减脂 10 斤”）
  final String name;

  /// 图标键或资源标识（可选，UI 自行映射）
  final String? iconKey;

  /// 截止日期（用于倒计时，空表示无截止）
  final DateTime? dueDate;

  /// 已完成步骤数（用于总体进度条）
  final int completedSteps;

  /// 总步骤数
  final int totalSteps;

  /// 子任务清单
  final List<SubQuest> subQuests;

  /// 经验/健康掉落记录
  final List<QuestLogEntry> logs;

  /// 原始专注会话（可由上层聚合为曲线与热力图）
  final List<FocusSession> focusSessions;

  /// 预计算统计（可选，避免详情页重复聚合）
  final QuestStats? stats;

  const Quest({
    required this.id,
    required this.name,
    this.iconKey,
    this.dueDate,
    required this.completedSteps,
    required this.totalSteps,
    required this.subQuests,
    required this.logs,
    required this.focusSessions,
    this.stats,
  });
}

/// 主线任务模块聚合
class MainQuestModule {
  /// 主线任务列表（卡片列表数据源）
  final List<Quest> quests;

  const MainQuestModule({required this.quests});
}
```

### 人生卷轴 方法接口

```dart
/// 说明：
/// - 下述均为抽象接口，仅包含方法签名与注释，不含具体实现。
/// - Repository 专注数据读写与持久化；Service 负责业务规则编排与计算。
/// - 方法返回 Future/Stream，便于异步数据源与实时订阅。

// -----------------------------
// 时间 Time
// -----------------------------

abstract class TimeRepository {
  /// 读取时间配置（出生日期、预期寿命、每日重置时间）。
  Future<TimeConfig> fetchConfig();

  /// 保存时间配置；应覆盖全量或按字段持久化。
  Future<void> saveConfig(TimeConfig config);
}

abstract class TimeService {
  /// 基于当前时刻与配置计算五环进度快照。
  Future<TimeProgressSnapshot> computeSnapshot(DateTime now);

  /// 组合配置与进度快照为 TimeModule，供界面直接使用。
  Future<TimeModule> loadTimeModule(DateTime now);

  /// 订阅进度快照（例如按分钟/秒触发重算），频率由实现决定。
  Stream<TimeProgressSnapshot> watchSnapshot();
}

// -----------------------------
// 健康 Health
// -----------------------------

abstract class HealthRepository {
  /// 查询健康分时间序列（闭区间 [start, end]）。
  Future<List<MetricPoint>> fetchHealthScores({
    required DateTime start,
    required DateTime end,
  });

  /// 查询情绪/幸福度时间序列（可为空）。
  Future<List<MetricPoint>> fetchMoodScores({
    required DateTime start,
    required DateTime end,
  });

  /// 追加一条健康分记录（若同日存在，具体合并策略由实现定义）。
  Future<void> appendHealthScore(MetricPoint point);

  /// 追加一条情绪分记录。
  Future<void> appendMoodScore(MetricPoint point);
}

abstract class HealthService {
  /// 聚合健康分/情绪分与统计数据，生成卡片所需数据。
  Future<HealthCardData> buildHealthCard({
    required DateTime start,
    required DateTime end,
  });

  /// 记录某日健康分（可包含去重/覆盖策略）。
  Future<void> recordDailyHealthScore({
    required DateTime date,
    required double score,
  });

  /// 记录某日情绪分。
  Future<void> recordDailyMoodScore({
    required DateTime date,
    required double score,
  });
}

// -----------------------------
// 智慧 Wisdom
// -----------------------------

abstract class WisdomRepository {
  /// 拉取技能列表。
  Future<List<WisdomSkill>> fetchSkills();

  /// 保存/更新单个技能（如等级、经验等字段变化）。
  Future<void> saveSkill(WisdomSkill skill);

  /// 新建技能，返回创建后的完整实体（含 id）。
  Future<WisdomSkill> createSkill({required String name});

  /// 删除技能。
  Future<void> deleteSkill(String skillId);
}

abstract class WisdomService {
  /// 加经验值；内部可根据 nextLevelXp 自动判断是否升级。
  Future<void> addExperience(String skillId, int deltaXp);

  /// 主动触发一次升级判定（例如在批量导入后）。
  Future<void> levelUpIfEligible(String skillId);

  /// 加载智慧模块聚合（列表用于卡片/折叠视图）。
  Future<WisdomModule> loadWisdomModule();

  /// 重命名技能。
  Future<void> renameSkill(String skillId, String newName);
}

// -----------------------------
// 金钱 Money / Wealth
// -----------------------------

abstract class MoneyRepository {
  /// 读取金钱摘要（如月薪、当前余额）。
  Future<MoneySummary> fetchMoneySummary();

  /// 更新月薪。
  Future<void> updateMonthlySalary(Money salary);

  /// 更新当前余额（可来源于账本同步或外部接口）。
  Future<void> updateCurrentBalance(Money balance);
}

abstract class MoneyService {
  /// 获取（或刷新）金钱摘要，用于小卡片展示。
  Future<MoneySummary> loadMoneySummary();

  /// 记一笔入账（实现可更新余额/流水等）。
  /// @note 暂时无需该功能
  Future<void> applyIncome(Money amount);

  /// 记一笔支出（实现可更新余额/流水等）。
  /// @note 暂时无需该功能
  Future<void> applyExpense(Money amount);
}

// -----------------------------
// 影响力 Influence
// -----------------------------

abstract class InfluenceRepository {
  /// 读取影响力状态。
  Future<InfluenceStatus> fetchInfluenceStatus();

  /// 保存影响力状态（如当前等级/解锁门槛）。
  Future<void> saveInfluenceStatus(InfluenceStatus status);
}

abstract class InfluenceService {
  /// 设置当前等级（通常由其它系统推导后写入）。
  Future<void> updateCurrentLevel(int level);

  /// 设置解锁所需等级（用于配置或关卡门槛调整）。
  Future<void> updateRequiredLevel(int level);

  /// 计算并返回最新的影响力状态（含 locked 判断与提示）。
  Future<InfluenceStatus> computeStatus();
}

// -----------------------------
// 主线任务 Main Quest
// -----------------------------

abstract class QuestRepository {
  /// 拉取所有主线任务列表。
  Future<List<Quest>> fetchQuests();

  /// 按 id 拉取单个任务（找不到可返回 null）。
  Future<Quest?> fetchQuestById(String questId);

  /// 新建或更新任务（全量覆盖语义由实现决定）。
  Future<void> saveQuest(Quest quest);

  /// 删除任务。
  Future<void> deleteQuest(String questId);

  /// 更新任务进度（completedSteps/totalSteps）。
  Future<void> updateQuestProgress({
    required String questId,
    required int completedSteps,
    required int totalSteps,
  });

  /// 更新任务截止日期（null 表示清除）。
  Future<void> updateQuestDueDate(String questId, DateTime? dueDate);

  /// 追加子任务。
  Future<void> appendSubQuest(String questId, SubQuest subQuest);

  /// 勾选/取消勾选子任务。
  Future<void> toggleSubQuest({
    required String questId,
    required String subQuestId,
    required bool done,
  });

  /// 追加一条经验/健康掉落日志。
  Future<void> appendQuestLog(String questId, QuestLogEntry entry);

  /// 记录一次专注会话。
  Future<void> appendFocusSession(String questId, FocusSession session);
}

abstract class QuestService {
  /// 加载主线任务模块聚合（供列表展示）。
  Future<MainQuestModule> loadMainQuestModule();

  /// 更新任务进度（示例所需签名）。
  Future<void> updateQuestProgress(String questId, int completedSteps, int totalSteps);

  /// 记录一次专注会话（用于统计图与热力图）。
  Future<void> recordFocus({
    required String questId,
    required DateTime start,
    required int minutes,
  });

  /// 勾选/取消子任务。
  Future<void> setSubQuestDone({
    required String questId,
    required String subQuestId,
    required bool done,
  });

  /// 重新计算并返回任务的统计数据（折线/热力图）。
  Future<QuestStats> computeQuestStats({
    required String questId,
    required DateTime start,
    required DateTime end,
  });

  /// 计算剩余时间（用于倒计时展示）；若无截止返回 null。
  Future<Duration?> remainingDuration(String questId);

  /// 完成某个里程碑时发放经验/健康奖励记录。
  Future<void> grantRewards({
    required String questId,
    required int wisdomXp,
    required int healthScore,
    String? note,
  });
}
```


### 人生卷轴 UI 布局骨架

```dart
import 'package:flutter/material.dart';

// -----------------------------------------------------------------------------
// 主界面：DashboardScreen
// -----------------------------------------------------------------------------
class DashboardScreen extends StatelessWidget {
  const DashboardScreen({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    // 强制深色主题
    return Theme(
      data: ThemeData.dark().copyWith(
        scaffoldBackgroundColor: const Color(0xFF121212),
        cardColor: const Color(0xFF1E1E1E),
      ),
      child: Scaffold(
        body: SafeArea(
          // 使用 ListView 构建垂直滚动的卡片流
          child: ListView(
            padding: const EdgeInsets.all(16.0),
            children: const [
              // 1. 顶部核心区：时间 (5层同心圆环)
              TimeRingsWidget(),
              SizedBox(height: 16),

              // 2. 数据监控区：金钱 & 影响力 (网格布局)
              // 文档变更：原健康放在此处，现根据最新UI文档调整：
              // 第二行是 金钱和影响力
              MoneyAndInfluenceRow(),
              SizedBox(height: 16),

              // 3. 成长系统：智慧 (技能列表)
              WisdomSkillsWidget(),
              SizedBox(height: 16),
              
              // 补充：健康卡片 (根据设计大纲，健康也是核心监控区，
              // 虽然UI文档没明确提第二行包含健康，但通常建议保留或放下放，
              // 这里暂按大纲逻辑补全，或按需调整顺序)
              HealthCardWidget(),
              SizedBox(height: 16),

              // 4. 底部行动区：主线任务
              MainQuestListWidget(),
              SizedBox(height: 32), // 底部留白
            ],
          ),
        ),
      ),
    );
  }
}

// -----------------------------------------------------------------------------
// 1. 时间模块：TimeRingsWidget
// -----------------------------------------------------------------------------
class TimeRingsWidget extends StatelessWidget {
  const TimeRingsWidget({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 300, // 预估高度
      decoration: BoxDecoration(
        color: Theme.of(context).cardColor,
        borderRadius: BorderRadius.circular(16),
      ),
      child: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: const [
            Icon(Icons.access_time, size: 48, color: Colors.orange),
            SizedBox(height: 8),
            Text(
              'Time Rings (5 Layers)',
              style: TextStyle(color: Colors.white70),
            ),
            Text(
              'Life / Year / Month / Week / Day',
              style: TextStyle(color: Colors.white30, fontSize: 12),
            ),
          ],
        ),
      ),
    );
  }
}

// -----------------------------------------------------------------------------
// 2. 金钱 & 影响力模块：MoneyAndInfluenceRow
// -----------------------------------------------------------------------------
class MoneyAndInfluenceRow extends StatelessWidget {
  const MoneyAndInfluenceRow({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        // 金钱卡片
        Expanded(
          child: Container(
            height: 120,
            padding: const EdgeInsets.all(12),
            decoration: BoxDecoration(
              color: Colors.blue.withOpacity(0.2), // 蓝色圆角背景
              borderRadius: BorderRadius.circular(16),
              border: Border.all(color: Colors.blue.withOpacity(0.3)),
            ),
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: const [
                Icon(Icons.attach_money, color: Colors.blue),
                SizedBox(height: 8),
                Text('Money', style: TextStyle(fontWeight: FontWeight.bold)),
                Text('Monthly Salary', style: TextStyle(fontSize: 12, color: Colors.white70)),
              ],
            ),
          ),
        ),
        const SizedBox(width: 16),
        // 影响力卡片
        Expanded(
          child: Container(
            height: 120,
            padding: const EdgeInsets.all(12),
            decoration: BoxDecoration(
              color: Colors.grey.withOpacity(0.2), // 灰色背景
              borderRadius: BorderRadius.circular(16),
            ),
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: const [
                Icon(Icons.lock_outline, color: Colors.grey),
                SizedBox(height: 8),
                Text('Influence', style: TextStyle(fontWeight: FontWeight.bold)),
                Text('Locked (Lv.10)', style: TextStyle(fontSize: 12, color: Colors.white70)),
              ],
            ),
          ),
        ),
      ],
    );
  }
}

// -----------------------------------------------------------------------------
// 3. 智慧模块：WisdomSkillsWidget
// -----------------------------------------------------------------------------
class WisdomSkillsWidget extends StatelessWidget {
  const WisdomSkillsWidget({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        color: Theme.of(context).cardColor,
        borderRadius: BorderRadius.circular(16),
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Row(
            mainAxisAlignment: MainAxisAlignment.spaceBetween,
            children: const [
              Text('Wisdom / Skills', style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
              Icon(Icons.add_circle_outline, color: Colors.white70),
            ],
          ),
          const SizedBox(height: 16),
          // 模拟技能列表项占位
          _buildSkillPlaceholder('English', 'Lv. 5'),
          const SizedBox(height: 8),
          _buildSkillPlaceholder('Flutter', 'Lv. 3'),
          const SizedBox(height: 8),
          _buildSkillPlaceholder('Reading', 'Lv. 12'),
        ],
      ),
    );
  }

  Widget _buildSkillPlaceholder(String name, String level) {
    return Container(
      padding: const EdgeInsets.symmetric(vertical: 12, horizontal: 16),
      decoration: BoxDecoration(
        color: Colors.white.withOpacity(0.05),
        borderRadius: BorderRadius.circular(12),
      ),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [
          Text(name),
          Text(level, style: const TextStyle(color: Colors.orangeAccent)),
        ],
      ),
    );
  }
}

// -----------------------------------------------------------------------------
// 补充：健康模块：HealthCardWidget
// -----------------------------------------------------------------------------
class HealthCardWidget extends StatelessWidget {
  const HealthCardWidget({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 180,
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        color: Theme.of(context).cardColor,
        borderRadius: BorderRadius.circular(16),
      ),
      child: Column(
        children: [
          Row(
            children: const [
              Icon(Icons.favorite, color: Colors.redAccent),
              SizedBox(width: 8),
              Text('Health', style: TextStyle(fontWeight: FontWeight.bold)),
            ],
          ),
          Expanded(
            child: Center(
              child: Text(
                '[Chart Placeholder]\nHeart Rate / Mood Graph',
                textAlign: TextAlign.center,
                style: TextStyle(color: Colors.white30),
              ),
            ),
          ),
          Row(
            mainAxisAlignment: MainAxisAlignment.spaceAround,
            children: const [
              Text('Avg: 85', style: TextStyle(fontWeight: FontWeight.bold)),
              Text('Max: 98', style: TextStyle(fontSize: 12, color: Colors.white70)),
              Text('Min: 60', style: TextStyle(fontSize: 12, color: Colors.white70)),
            ],
          ),
        ],
      ),
    );
  }
}

// -----------------------------------------------------------------------------
// 4. 主线任务模块：MainQuestListWidget
// -----------------------------------------------------------------------------
class MainQuestListWidget extends StatelessWidget {
  const MainQuestListWidget({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        const Padding(
          padding: EdgeInsets.only(left: 4, bottom: 12),
          child: Text('Main Quests', style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold)),
        ),
        // 模拟任务列表
        _buildQuestItem(Icons.fitness_center, 'Lose 5kg', '31 days left', 0.3),
        const SizedBox(height: 12),
        _buildQuestItem(Icons.book, 'PMP Certificate', '12 days left', 0.7),
      ],
    );
  }

  Widget _buildQuestItem(IconData icon, String title, String deadline, double progress) {
    return Container(
      height: 80,
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        color: const Color(0xFF2C2C2C),
        borderRadius: BorderRadius.circular(16),
        border: Border.all(color: Colors.white10),
      ),
      child: Row(
        children: [
          // 左侧图标
          Container(
            padding: const EdgeInsets.all(8),
            decoration: BoxDecoration(
              color: Colors.white10,
              borderRadius: BorderRadius.circular(8),
            ),
            child: Icon(icon, color: Colors.white70),
          ),
          const SizedBox(width: 16),
          // 中间标题与进度条
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                Text(title, style: const TextStyle(fontWeight: FontWeight.bold)),
                const SizedBox(height: 8),
                LinearProgressIndicator(
                  value: progress,
                  backgroundColor: Colors.black,
                  color: Colors.greenAccent,
                  minHeight: 4,
                ),
              ],
            ),
          ),
          const SizedBox(width: 16),
          // 右侧倒计时
          Text(deadline, style: const TextStyle(color: Colors.redAccent, fontSize: 12)),
        ],
      ),
    );
  }
}
```
